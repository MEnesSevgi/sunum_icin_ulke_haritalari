<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>ülkeler.2.</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ülke Haritası</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-simple-map-screenshoter/dist/leaflet-simple-map-screenshoter.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
  <style>
    body {
      display: flex;
      margin: 0;
      height: 100vh;
    }
    #map {
      flex: 1;
      height: 100%;
    }
    #sidebar {
      width: 300px;
      background: #f0f0f0;
      padding: 10px;
      overflow-y: auto;
    }
    button {
      margin: 5px 0;
      padding: 10px;
      cursor: pointer;
    }
    .leaflet-control-custom {
      background-color: white;
      width: 30px;
      height: 30px;
      line-height: 30px;
      text-align: center;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div id="sidebar">
    <h1>Ülke Haritası</h1>
    <div>
      <label for="country-select">Ülke Seç:</label>
      <select id="country-select">
        <option value="" disabled selected>Ülke Seçin</option> <option value="afghanistan" data-lat="33.9391" data-lng="67.7099">Afganistan</option>
<option value="germany" data-lat="51.1657" data-lng="10.4515">Almanya</option>
<option value="united_states" data-lat="37.0902" data-lng="-95.7129">Amerika Birleşik Devletleri</option>
<option value="andorra" data-lat="42.5063" data-lng="1.5211">Andora</option>
<option value="angola" data-lat="-11.2027" data-lng="17.8739">Angola</option>
<option value="antigua_and_barbuda" data-lat="17.0608" data-lng="-61.7964">Antigua ve Barbuda</option>
<option value="argentina" data-lat="-38.4161" data-lng="-63.6167">Arjantin</option>
<option value="albania" data-lat="41.1533" data-lng="20.1683">Arnavutluk</option>
<option value="australia" data-lat="-25.2744" data-lng="133.7751">Avustralya</option>
<option value="austria" data-lat="47.5162" data-lng="14.5501">Avusturya</option>
<option value="azerbaijan" data-lat="40.1431" data-lng="47.5769">Azerbaycan</option>
<option value="bahamas" data-lat="25.0343" data-lng="-77.3963">Bahama Adaları</option>
<option value="bahrain" data-lat="26.0667" data-lng="50.5577">Bahreyn</option>
<option value="bangladesh" data-lat="23.685" data-lng="90.3563">Bangladeş</option>
<option value="barbados" data-lat="13.1939" data-lng="-59.5432">Barbados</option>
<option value="belgium" data-lat="50.8503" data-lng="4.3517">Belçika</option>
<option value="belize" data-lat="17.1899" data-lng="-88.4976">Belize</option>
<option value="benin" data-lat="9.3079" data-lng="2.3158">Benin</option>
<option value="belarus" data-lat="53.9045" data-lng="27.5590">Beyaz Rusya</option>
<option value="united_arab_emirates" data-lat="23.4241" data-lng="53.8478">Birleşik Arap Emirlikleri</option>
<option value="bolivia" data-lat="-16.5000" data-lng="-68.1193">Bolivya</option>
<option value="bosnia_and_herzegovina" data-lat="43.9159" data-lng="17.6791">Bosna-Hersek</option>
<option value="botswana" data-lat="-22.3285" data-lng="24.6849">Botsvana</option>
<option value="brazil" data-lat="-14.2350" data-lng="-51.9253">Brezilya</option>
<option value="brunei" data-lat="4.5353" data-lng="114.7277">Brunei</option>
<option value="bulgaria" data-lat="42.7339" data-lng="25.4858">Bulgaristan</option>
<option value="burkina_faso" data-lat="12.2383" data-lng="-1.5616">Burkina Faso</option>
<option value="burundi" data-lat="-3.3731" data-lng="29.9189">Burundi</option>
<option value="bhutan" data-lat="27.5149" data-lng="90.4336">Butan</option>
<option value="algeria" data-lat="28.0339" data-lng="1.6596">Cezayir</option>
<option value="djibouti" data-lat="11.8251" data-lng="42.5903">Cibuti</option>
<option value="chad" data-lat="15.4542" data-lng="18.7322">Çad</option>
<option value="czech_republic" data-lat="49.8175" data-lng="15.4730">Çek Cumhuriyeti</option>
<option value="china" data-lat="35.8617" data-lng="104.1954">Çin</option>
<option value="denmark" data-lat="56.2639" data-lng="9.5018">Danimarka</option>
<option value="democratic_republic_of_the_congo" data-lat="-4.0383" data-lng="21.7587">Demokratik Kongo Cumhuriyeti</option>
<option value="east_timor" data-lat="-8.8749" data-lng="125.7275">Doğu Timor</option>
<option value="dominican_republic" data-lat="18.7357" data-lng="-70.1627">Dominik Cumhuriyeti</option>
<option value="dominica" data-lat="15.4149" data-lng="-61.3709">Dominika</option>
<option value="ecuador" data-lat="-1.8312" data-lng="-78.1834">Ekvador</option>
<option value="equatorial_guinea" data-lat="1.6508" data-lng="9.5702">Ekvator Ginesi</option>
<option value="el_salvador" data-lat="13.7942" data-lng="-88.8965">El Salvador</option>
<option value="indonesia" data-lat="-0.7893" data-lng="113.9213">Endonezya</option>
<option value="eritrea" data-lat="15.1792" data-lng="39.7823">Eritre</option>
<option value="armenia" data-lat="40.0691" data-lng="45.0382">Ermenistan</option>
<option value="estonia" data-lat="58.5953" data-lng="25.0136">Estonya</option>
<option value="ethiopia" data-lat="9.145" data-lng="40.489673">Etiyopya</option>
<option value="morocco" data-lat="31.7917" data-lng="-7.0926">Fas</option>
<option value="fiji" data-lat="-17.7134" data-lng="178.0650">Fiji</option>
<option value="ivory_coast" data-lat="7.5399" data-lng="-5.5471">Fildişi Sahili</option>
<option value="philippines" data-lat="12.8797" data-lng="121.7740">Filipinler</option>
<option value="palestine" data-lat="31.9522" data-lng="35.2332">Filistin (*)</option>
<option value="finland" data-lat="61.9241" data-lng="25.7482">Finlandiya</option>
<option value="france" data-lat="46.6034" data-lng="1.8883">Fransa</option>
<option value="gabon" data-lat="0.8031" data-lng="11.6094">Gabon</option>
<option value="gambia" data-lat="13.4668" data-lng="-16.5780">Gambiya</option>
<option value="ghana" data-lat="7.3469" data-lng="-0.1922">Gana</option>
<option value="guinea" data-lat="9.9456" data-lng="-9.6966">Gine</option>
<option value="guinea_bissau" data-lat="11.8810" data-lng="-15.5980">Gine Bissau</option>
<option value="grenada" data-lat="12.1165" data-lng="-61.6794">Grenada</option>
<option value="guatemala" data-lat="15.7835" data-lng="-90.2308">Guatemala</option>
<option value="guyana" data-lat="4.8604" data-lng="-58.9302">Guyana</option>
<option value="south_africa" data-lat="-30.5595" data-lng="22.9375">Güney Afrika</option>
<option value="south_korea" data-lat="35.9078" data-lng="127.7669">Güney Kore</option>
<option value="south_sudan" data-lat="6.87699" data-lng="31.3069">Güney Sudan</option>
<option value="georgia" data-lat="42.3154" data-lng="43.3569">Gürcistan</option>
<option value="haiti" data-lat="18.9712" data-lng="-72.2852">Haiti</option>
<option value="croatia" data-lat="45.1" data-lng="15.2">Hırvatistan</option>
<option value="india" data-lat="20.5937" data-lng="78.9629">Hindistan</option>
<option value="netherlands" data-lat="52.3784" data-lng="4.9009">Hollanda</option>
<option value="honduras" data-lat="15.1999" data-lng="-86.2419">Honduras</option>
<option value="iraq" data-lat="33.2232" data-lng="43.6793">Irak</option>
<option value="united_kingdom" data-lat="55.3781" data-lng="-3.4360">İngiltere (Birleşik Krallık)</option>
<option value="iran" data-lat="32.4279" data-lng="53.6880">İran</option>
<option value="ireland" data-lat="53.4129" data-lng="-8.2439">İrlanda</option>
<option value="spain" data-lat="40.4637" data-lng="-3.7492">İspanya</option>
<option value="israel" data-lat="31.0461" data-lng="34.8516">İsrail</option>
<option value="sweden" data-lat="60.1282" data-lng="18.6435">İsveç</option>
<option value="switzerland" data-lat="46.8182" data-lng="8.2275">İsviçre</option>
<option value="italy" data-lat="41.8719" data-lng="12.5674">İtalya</option>
<option value="iceland" data-lat="64.9631" data-lng="-19.0208">İzlanda</option>
<option value="jamaica" data-lat="18.1096" data-lng="-77.2975">Jamaika</option>
<option value="japan" data-lat="36.2048" data-lng="138.2529">Japonya</option>
<option value="cambodia" data-lat="12.5657" data-lng="104.9910">Kamboçya</option>
<option value="cameroon" data-lat="3.8480" data-lng="11.5021">Kamerun</option>
<option value="canada" data-lat="56.1304" data-lng="-106.3468">Kanada</option>
<option value="montenegro" data-lat="42.4411" data-lng="19.2636">Karadağ</option>
<option value="qatar" data-lat="25.3548" data-lng="51.1839">Katar</option>
<option value="kazakhstan" data-lat="48.0196" data-lng="66.9237">Kazakistan</option>
<option value="kenya" data-lat="-1.2864" data-lng="36.8172">Kenya</option>
<option value="kyrgyzstan" data-lat="41.2044" data-lng="74.7661">Kırgızistan</option>
<option value="kiribati" data-lat="-3.3704" data-lng="-172.9797">Kiribati</option>
<option value="colombia" data-lat="4.5709" data-lng="-74.2973">Kolombiya</option>
<option value="comoros" data-lat="-11.6937" data-lng="43.2540">Komorlar</option>
<option value="congo" data-lat="-0.2280" data-lng="15.8277">Kongo</option>
<option value="kosovo" data-lat="42.6026" data-lng="20.9020">Kosova</option>
<option value="costa_rica" data-lat="9.7489" data-lng="-83.7534">Kosta Rika</option>
<option value="kuwait" data-lat="29.3759" data-lng="47.9774">Kuveyt</option>
<option value="northern_cyprus" data-lat="35.3335" data-lng="33.3678">Kuzey Kıbrıs Türk Cumhuriyeti</option>
<option value="north_korea" data-lat="40.3399" data-lng="127.5101">Kuzey Kore</option>
<option value="cuba" data-lat="21.5216" data-lng="-77.7812">Küba</option>
<option value="laos" data-lat="19.8563" data-lng="102.4955">Laos</option>
<option value="lesotho" data-lat="-29.6094" data-lng="28.2336">Lesotho</option>
<option value="latvia" data-lat="56.8796" data-lng="24.6032">Letonya</option>
<option value="liberia" data-lat="6.4281" data-lng="-9.4295">Liberya</option>
<option value="libya" data-lat="26.3351" data-lng="17.2283">Libya</option>
<option value="liechtenstein" data-lat="47.2662" data-lng="9.5500">Liechtenstein</option>
<option value="lithuania" data-lat="55.1694" data-lng="23.8813">Litvanya</option>
<option value="lebanon" data-lat="33.8547" data-lng="35.8623">Lübnan</option>
<option value="luxembourg" data-lat="49.6118" data-lng="6.1319">Lüksemburg</option>
<option value="hungary" data-lat="47.1625" data-lng="19.5033">Macaristan</option>
<option value="madagascar" data-lat="-18.7669" data-lng="46.8691">Madagaskar</option>
<option value="north_macedonia" data-lat="41.6086" data-lng="21.7453">Makedonya</option>
<option value="malawi" data-lat="-13.2543" data-lng="34.3015">Malavi</option>
<option value="maldives" data-lat="3.2028" data-lng="73.2207">Maldivler</option>
<option value="malaysia" data-lat="4.2105" data-lng="101.9758">Malezya</option>
<option value="mali" data-lat="17.5707" data-lng="-3.9962">Mali</option>
<option value="malta" data-lat="35.9375" data-lng="14.3754">Malta</option>
<option value="marshall_islands" data-lat="7.1095" data-lng="171.1895">Marşal Adaları</option>
<option value="mauritius" data-lat="-20.348404" data-lng="57.552152">Mauritius</option>
<option value="mexico" data-lat="23.6345" data-lng="-102.5528">Meksika</option>
<option value="egypt" data-lat="26.8206" data-lng="30.8025">Mısır</option>
<option value="micronesia" data-lat="7.4256" data-lng="150.5508">Mikronezya</option>
<option value="mongolia" data-lat="42.5028" data-lng="105.0059">Moğolistan</option>
<option value="moldova" data-lat="47.4116" data-lng="28.3699">Moldova</option>
<option value="monaco" data-lat="43.7384" data-lng="7.4246">Monako</option>
<option value="mauritania" data-lat="20.2540" data-lng="-10.9408">Moritanya</option>
<option value="mozambique" data-lat="-18.6657" data-lng="35.5296">Mozambik</option>
<option value="myanmar" data-lat="21.9162" data-lng="95.9560">Myanmar</option>
<option value="namibia" data-lat="-22.9576" data-lng="18.4904">Namibya</option>
<option value="nauru" data-lat="-0.5228" data-lng="166.9315">Nauru</option>
<option value="nepal" data-lat="28.3949" data-lng="84.1240">Nepal</option>
<option value="niger" data-lat="17.6078" data-lng="8.0817">Nijer</option>
<option value="nigeria" data-lat="9.0820" data-lng="8.6753">Nijerya</option>
<option value="nicaragua" data-lat="12.8654" data-lng="-85.2072">Nikaragua</option>
<option value="norway" data-lat="60.4720" data-lng="8.4689">Norveç</option>
<option value="central_african_republic" data-lat="4.3947" data-lng="18.5580">Orta Afrika Cumhuriyeti</option>
<option value="uzbekistan" data-lat="41.3775" data-lng="64.5853">Özbekistan</option>
<option value="pakistan" data-lat="30.3753" data-lng="69.3451">Pakistan</option>
<option value="palau" data-lat="7.5149" data-lng="134.5825">Palau</option>
<option value="panama" data-lat="8.9824" data-lng="-79.5199">Panama</option>
<option value="papua_new_guinea" data-lat="-6.314993" data-lng="143.9556">Papua Yeni Gine</option>
<option value="paraguay" data-lat="-23.4422" data-lng="-58.4438">Paraguay</option>
<option value="peru" data-lat="-9.1900" data-lng="-75.0152">Peru</option>
<option value="poland" data-lat="51.9194" data-lng="19.1451">Polonya</option>
<option value="portugal" data-lat="39.3999" data-lng="-8.2245">Portekiz</option>
<option value="romania" data-lat="45.9432" data-lng="24.9668">Romanya</option>
<option value="rwanda" data-lat="-1.9403" data-lng="29.8739">Ruanda</option>
<option value="russia" data-lat="61.5240" data-lng="105.3188">Rusya</option>
<option value="saint_kitts_and_nevis" data-lat="17.3333" data-lng="-62.7833">Saint Kitts ve Nevis</option>
<option value="saint_lucia" data-lat="13.9094" data-lng="-60.9789">Saint Lucia</option>
<option value="saint_vincent_and_the_grenadines" data-lat="13.2528" data-lng="-61.1971">Saint Vincent ve Grenadine Adaları</option>
<option value="samoa" data-lat="-13.7590" data-lng="-172.1046">Samoa</option>
<option value="san_marino" data-lat="43.9333" data-lng="12.4460">San Marino</option>
<option value="sao_tome_and_principe" data-lat="0.3372" data-lng="6.7333">Sao Tome ve Principe</option>
<option value="senegal" data-lat="14.4974" data-lng="-14.4524">Senegal</option>
<option value="seychelles" data-lat="-4.6796" data-lng="55.4920">Seyşeller</option>
<option value="serbia" data-lat="44.0165" data-lng="21.0059">Sırbistan</option>
<option value="sierra_leone" data-lat="8.4606" data-lng="-11.7799">Sierra Leone</option>
<option value="singapore" data-lat="1.3521" data-lng="103.8198">Singapur</option>
<option value="slovakia" data-lat="48.6690" data-lng="19.6990">Slovakya</option>
<option value="slovenia" data-lat="46.1512" data-lng="14.9955">Slovenya</option>
<option value="solomon_islands" data-lat="-9.4280" data-lng="160.0000">Solomon Adaları</option>
<option value="somalia" data-lat="5.1521" data-lng="46.1996">Somali</option>
<option value="sri_lanka" data-lat="7.8731" data-lng="80.7718">Sri Lanka</option>
<option value="sudan" data-lat="15.5000" data-lng="32.5599">Sudan</option>
<option value="suriname" data-lat="3.9193" data-lng="-56.0278">Surinam</option>
<option value="syria" data-lat="34.8021" data-lng="38.9968">Suriye</option>
<option value="saudi_arabia" data-lat="23.8859" data-lng="45.0792">Suudi Arabistan</option>
<option value="swaziland" data-lat="-26.5225" data-lng="31.4659">Svaziland</option>
<option value="chile" data-lat="-35.6751" data-lng="-71.5429">Şili</option>
<option value="tajikistan" data-lat="38.8610" data-lng="71.2761">Tacikistan</option>
<option value="tanzania" data-lat="-6.3693" data-lng="34.8888">Tanzanya</option>
<option value="thailand" data-lat="15.8700" data-lng="100.9925">Tayland</option>
<option value="togo" data-lat="8.6195" data-lng="0.8248">Togo</option>
<option value="tonga" data-lat="-21.1789" data-lng="-175.1982">Tonga</option>
<option value="trinidad_and_tobago" data-lat="10.6918" data-lng="-61.2225">Trinidad ve Tobago</option>
<option value="tunisia" data-lat="33.8869" data-lng="9.5375">Tunus</option>
<option value="tuvalu" data-lat="-7.1095" data-lng="179.1940">Tuvalu</option>
<option value="turkey" data-lat="38.9637" data-lng="35.2433">Türkiye</option>
<option value="turkmenistan" data-lat="38.9697" data-lng="59.5560">Türkmenistan</option>
<option value="uganda" data-lat="1.3733" data-lng="32.2903">Uganda</option>
<option value="ukraine" data-lat="48.3794" data-lng="31.1656">Ukrayna</option>
<option value="oman" data-lat="21.5129" data-lng="55.9233">Umman</option>
<option value="uruguay" data-lat="-32.5228" data-lng="-55.7658">Uruguay</option>
<option value="jordan" data-lat="30.5852" data-lng="36.2384">Ürdün</option>
<option value="vanuatu" data-lat="-15.3763" data-lng="166.9591">Vanuatu</option>
<option value="venezuela" data-lat="6.4238" data-lng="-66.5897">Venezuela</option>
<option value="vietnam" data-lat="14.0583" data-lng="108.2772">Vietnam</option>
<option value="yemen" data-lat="15.5524" data-lng="48.5164">Yemen</option>
<option value="new_zealand" data-lat="-40.9006" data-lng="174.8860">Yeni Zelanda</option>
<option value="cape_verde" data-lat="16.0020" data-lng="-24.0132">Yeşil Burun Adaları</option>
<option value="greece" data-lat="39.0742" data-lng="21.8243">Yunanistan</option>
<option value="zambia" data-lat="-13.1339" data-lng="27.8493">Zambiya</option>
<option value="zimbabwe" data-lat="-19.0154" data-lng="29.1549">Zimbabve</option>
        <!-- Buraya ülkeler eklenecek -->
      </select>
    </div>
    <div>
      <label for="color-picker">Çizim Rengi:</label>
      <input type="color" id="color-picker" value="#ff0000">
    </div>
    <div>
      <label for="layer-select">Katman Seç:</label>
      <select id="layer-select">
        <option value="street" selected>OpenStreetMap</option>
        <option value="cartoDB">CartoDB</option>
        <option value="esriImagery">UYDU GÖRÜNTÜSÜ</option>
        <option value="esriTopo">Topografik</option>
        <option value="openStreetMapDark">OpenStreetMap Dark</option>
      </select>
    </div>
    <button id="clear-route">Temizle</button>
    <button id="save-route">Ekran Görüntüsü Al</button>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-routing-machine/dist/leaflet-routing-machine.js"></script>
  <script src="https://unpkg.com/leaflet-simple-map-screenshoter"></script>
  <script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>

  <script>
    const map = L.map('map').setView([39.9334, 32.8597], 6);
    const screenshoter = L.simpleMapScreenshoter().addTo(map);

    const layers = {
      street: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        maxZoom: 19,
        attribution: '© OpenStreetMap contributors'
      }),
      cartoDB: L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://carto.com/">CartoDB</a>'
      }),
      esriImagery: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri'
      }),
      esriTopo: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Tiles &copy; Esri'
      }),
      openStreetMapDark: L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: '&copy; <a href="https://carto.com/">CartoDB</a>'
      })
    };

    let currentLayer = layers.street.addTo(map);
    let countryPolygon;

    document.getElementById('layer-select').addEventListener('change', function () {
      const selectedLayerKey = this.value;
      if (layers[selectedLayerKey]) {
        map.removeLayer(currentLayer);
        currentLayer = layers[selectedLayerKey].addTo(map);
      }
    });

    document.getElementById('country-select').addEventListener('change', function() {
      const selectedOption = this.options[this.selectedIndex];
      const lat = selectedOption.getAttribute('data-lat');
      const lng = selectedOption.getAttribute('data-lng');
      const selectedColor = document.getElementById('color-picker').value;

      if (countryPolygon) {
        map.removeLayer(countryPolygon);
      }

      countryPolygon = L.circle([lat, lng], {
        color: selectedColor,
        radius: 500000,
        fillOpacity: 0
      }).addTo(map);

      map.setView([lat, lng], 4);
    });

    document.getElementById('color-picker').addEventListener('input', function() {
      if (countryPolygon) {
        countryPolygon.setStyle({ color: this.value });
      }
    });

    document.getElementById("clear-route").addEventListener("click", () => {
      if (countryPolygon) {
        map.removeLayer(countryPolygon);
        countryPolygon = null;
      }
    });

    document.getElementById("save-route").addEventListener("click", () => {
      screenshoter.takeScreen('blob').then(blob => {
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "harita.png";
        a.click();
      });
    });

    const drawnItems = new L.FeatureGroup();
    map.addLayer(drawnItems);

    const drawControl = new L.Control.Draw({
      draw: {
        polyline: { shapeOptions: { color: '#ff0000' } },
        polygon: { shapeOptions: { color: '#ff0000' } },
        circle: { shapeOptions: { color: '#ff0000' } },
        rectangle: { shapeOptions: { color: '#ff0000' } },
        marker: true,
        circlemarker: false
      },
      edit: { featureGroup: drawnItems }
    });
    map.addControl(drawControl);

    map.on(L.Draw.Event.CREATED, function (event) {
      const layer = event.layer;
      drawnItems.addLayer(layer);
      if (layer.setStyle) {
        layer.setStyle({ color: document.getElementById('color-picker').value });
      }
    });

    let textAddingMode = false;

    const textButton = L.control({ position: 'topleft' });
    textButton.onAdd = function (map) {
      const div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
      div.title = "Yazı Ekle";
      div.innerHTML = '🅰️';

      div.onclick = function () {
        textAddingMode = !textAddingMode;
        div.style.backgroundColor = textAddingMode ? '#aaf' : 'white';
        map.getContainer().style.cursor = textAddingMode ? 'crosshair' : '';
      };
      return div;
    };
    textButton.addTo(map);

    map.on('click', function (e) {
      if (!textAddingMode) return;

      const userText = prompt("Haritaya eklemek istediğiniz yazıyı girin:");
      if (userText) {
        const textIcon = L.divIcon({
          className: 'custom-text-label',
          html: `<div style="font-weight: bold; cursor: move; user-select:none;">${userText}</div>`
        });

        const textMarker = L.marker(e.latlng, {
          icon: textIcon,
          draggable: true
        }).addTo(drawnItems);

        textMarker.on('dblclick', function () {
          const newText = prompt("Yazıyı düzenleyin:", userText);
          if (newText !== null && newText.trim() !== '') {
            const newIcon = L.divIcon({
              className: 'custom-text-label',
              html: `<div style="font-weight: bold; cursor: move; user-select:none;">${newText}</div>`
            });
            textMarker.setIcon(newIcon);
          }
        });
      }

      textAddingMode = false;
      const buttonDiv = document.querySelector('.leaflet-control-custom');
      if (buttonDiv) {
        buttonDiv.style.backgroundColor = 'white';
      }
      map.getContainer().style.cursor = '';
    });
  </script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
